


<div class="space-y-8">
  <div class="pixel-border-inset p-4 bg-black/50">
    <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4">
      <h2 class="text-xl md:text-2xl text-yellow-300 mb-2 sm:mb-0">DEX LIQUIDITY POOLS</h2>
      <button (click)="cryptoDataService.togglePause()" class="pixel-border px-2 py-1 text-xs self-start sm:self-center transition-colors duration-200"
        [class.text-green-400]="cryptoDataService.isPaused()"
        [class.hover:bg-green-900/50]="cryptoDataService.isPaused()"
        [class.text-red-400]="!cryptoDataService.isPaused()"
        [class.hover:bg-red-900/50]="!cryptoDataService.isPaused()"
      >
        @if (cryptoDataService.isPaused()) {
          <span>RESUME UPDATES</span>
        } @else {
          <span>PAUSE UPDATES</span>
        }
      </button>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-left text-xs sm:text-sm">
        <thead>
          <tr class="border-b-2 border-cyan-500">
            <th class="p-2">PLATFORM</th>
            <th class="p-2">PAIR</th>
            <th class="p-2 text-right">LIQUIDITY (USD)</th>
            <th class="p-2 text-right">APY %</th>
          </tr>
        </thead>
        <tbody>
          @for (pool of dexPools(); track $index) {
            <tr class="border-b border-cyan-900">
              <td class="p-2 font-bold">{{ pool.platform }}</td>
              <td class="p-2">{{ pool.pair }}</td>
              <td class="p-2 text-right">{{ formatLiquidity(pool.liquidity) }}</td>
              <td class="p-2 text-right">{{ pool.apy.toFixed(2) }}%</td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <div>
    <button (click)="analyzeData()" [disabled]="isLoading()" class="pixel-border p-3 text-fuchsia-400 bg-black/50 hover:bg-fuchsia-900/50 disabled:opacity-50 disabled:cursor-wait transition-colors w-full sm:w-auto">
      @if (isLoading()) {
        <span>ANALYZING...</span>
      } @else {
        <span>RUN AI ANALYSIS_</span>
      }
    </button>
  </div>

  @if (isLoading() || aiAnalysis()) {
    <div class="pixel-border-inset p-4 bg-black/50 min-h-[150px]">
      <h3 class="text-lg mb-4 text-yellow-300">AI REPORT:</h3>
       @if (isLoading()) {
        <div class="flex items-center space-x-2">
          <div class="w-2 h-4 bg-cyan-400 animate-pulse"></div>
          <div class="w-2 h-4 bg-cyan-400 animate-pulse [animation-delay:0.2s]"></div>
          <div class="w-2 h-4 bg-cyan-400 animate-pulse [animation-delay:0.4s]"></div>
          <p>Pixel Arb AI is processing liquidity data...</p>
        </div>
      }
      @if (aiAnalysis()) {
        <pre class="text-xs sm:text-sm whitespace-pre-wrap leading-relaxed" [innerHTML]="aiAnalysis()"></pre>
      }
    </div>
  }
</div>