
<div class="space-y-8">
  <div class="pixel-border-inset p-4 bg-black/50">
    <div class="flex flex-col sm:flex-row justify-between sm:items-center mb-4">
      <h2 class="text-xl md:text-2xl text-yellow-300 mb-2 sm:mb-0">CEX TRADING SIGNALS</h2>
      <button (click)="cryptoDataService.togglePause()" class="pixel-border px-2 py-1 text-xs self-start sm:self-center transition-colors duration-200"
        [class.text-green-400]="cryptoDataService.isPaused()"
        [class.hover:bg-green-900/50]="cryptoDataService.isPaused()"
        [class.text-red-400]="!cryptoDataService.isPaused()"
        [class.hover:bg-red-900/50]="!cryptoDataService.isPaused()"
      >
        @if (cryptoDataService.isPaused()) {
          <span>RESUME UPDATES</span>
        } @else {
          <span>PAUSE UPDATES</span>
        }
      </button>
    </div>
    <div class="overflow-x-auto">
      <table class="w-full text-left text-xs sm:text-sm">
        <thead>
          <tr class="border-b-2 border-cyan-500">
            <th class="p-2">COIN/PAIR</th>
            <th class="p-2">EXCHANGE</th>
            <th class="p-2 text-right">ENTRY PRICE</th>
            <th class="p-2 text-right">TARGET PRICE</th>
            <th class="p-2 text-right">PROFIT %</th>
            <th class="p-2">GRADE</th>
            <th class="p-2 text-right">TIME</th>
          </tr>
        </thead>
        <tbody>
          @for (signal of signals(); track $index) {
            <tr class="border-b border-cyan-900">
              <td class="p-2 font-bold">{{ signal.coin }}/{{signal.pair}}</td>
              <td class="p-2">{{ signal.exchange }}</td>
              <td class="p-2 text-right">{{ formatSignalPrice(signal.entry_price) }}</td>
              <td class="p-2 text-right">{{ formatSignalPrice(signal.target_price) }}</td>
              <td class="p-2 text-right text-green-400">{{ signal.profit_percent }}%</td>
              <td class="p-2">{{ signal.signal_grade }}</td>
              <td class="p-2 text-right">{{ formatTime(signal.signal_time) }}</td>
            </tr>
          } @empty {
            <tr class="border-b border-cyan-900">
                <td colspan="7" class="p-4 text-center text-gray-500">
                    Awaiting signals from the network...
                </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  </div>

  <div>
    <button (click)="analyzeData()" [disabled]="isLoading() || signals().length === 0" class="pixel-border p-3 text-fuchsia-400 bg-black/50 hover:bg-fuchsia-900/50 disabled:opacity-50 disabled:cursor-wait transition-colors w-full sm:w-auto">
      @if (isLoading()) {
        <span>ANALYZING...</span>
      } @else {
        <span>RUN AI ANALYSIS_</span>
      }
    </button>
  </div>

  @if (isLoading() || aiAnalysis()) {
    <div class="pixel-border-inset p-4 bg-black/50 min-h-[150px]">
      <h3 class="text-lg mb-4 text-yellow-300">AI REPORT:</h3>
      @if (isLoading()) {
        <div class="flex items-center space-x-2">
          <div class="w-2 h-4 bg-cyan-400 animate-pulse"></div>
          <div class="w-2 h-4 bg-cyan-400 animate-pulse [animation-delay:0.2s]"></div>
          <div class="w-2 h-4 bg-cyan-400 animate-pulse [animation-delay:0.4s]"></div>
          <p>Pixel Arb AI is processing market data...</p>
        </div>
      }
      @if (aiAnalysis()) {
        <pre class="text-xs sm:text-sm whitespace-pre-wrap leading-relaxed" [innerHTML]="aiAnalysis()"></pre>
      }
    </div>
  }
</div>